<%- include("templates/header") %>
<div class="container home-container mt-5 mb-3">
  <h1>New Threads ðŸŒŸ</h1>
  <div class="row">
    <% recentThreads.forEach(thread => { %>
    <!-- Loop through recentThreads -->
    <div class="col-md-4">
      <div
        onclick="window.location.href='/thread/<%= thread.thread_id %>'"
        style="cursor: pointer"
      >
        <div
          class="thread-card p-3 mb-2 d-flex flex-column justify-content-between"
        >
          <div class="d-flex justify-content-between">
            <div class="d-flex flex-row align-items-center">
              <div class="thread-card-profile">
                <!-- Display profile image -->
                <% if (thread.profile_id == null) { %>
                <i class="bx bxl-mailchimp"></i>
                <% } else { %>
                <img
                  src="<%= thread.cloudinary_url %>"
                  alt="Profile Icon"
                  class="profile-icon"
                />
                <% } %>
              </div>
              <div class="ms-2 c-details">
                <h6 class="mb-0 thread-card-username">
                  <%= thread.username %>
                </h6>
                <!-- Display username -->
                <span></span>
              </div>
            </div>
          </div>
          <div class="mt-5">
            <h3 class="thread-card-title"><%= thread.title %></h3>
            <!-- Display thread title -->
            <div class="thread-card-text"><%= thread.text %></div>
            <!-- Display thread text -->
          </div>
          <div class="mt-3">
            <i class="bx bx-like"></i>
            <span class="thread-card-likes ms-1"><%= thread.likes %></span>
            <!-- Display thread likes -->
            <i class="bx bx-comment-detail ms-3"></i>
            <span class="thread-card-likes ms-1"><%= thread.comments %></span>
          </div>
        </div>
        <!-- End of Card -->
      </div>
    </div>
    <% }); %>
    <!-- End of loop -->
  </div>

  <hr class="hr" />
  <h1>Popular ðŸ”¥</h1>
  <div class="row">
    <% likedThreads.forEach(thread => { %>
    <div class="col-md-4">
      <div
        onclick="window.location.href='/thread/<%= thread.thread_id %>'"
        style="cursor: pointer"
      >
        <div
          class="thread-card p-3 mb-2 d-flex flex-column justify-content-between"
        >
          <div class="d-flex justify-content-between">
            <div class="d-flex flex-row align-items-center">
              <div class="thread-card-profile">
                <!-- Display profile image -->
                <% if (thread.profile_id == null) { %>
                <i class="bx bxl-mailchimp"></i>
                <% } else { %>
                <img
                  src="<%= thread.cloudinary_url %>"
                  alt="Profile Icon"
                  class="profile-icon"
                />
                <% } %>
              </div>
              <div class="ms-2 c-details">
                <h6 class="mb-0 thread-card-username">
                  <%= thread.username %>
                </h6>
                <!-- Display username -->
                <span></span>
              </div>
            </div>
          </div>
          <div class="mt-5">
            <h3 class="thread-card-title"><%= thread.title %></h3>
            <!-- Display thread title -->
            <div class="thread-card-text"><%= thread.text %></div>
            <!-- Display thread text -->
          </div>
          <div class="mt-3">
            <i class="bx bx-like"></i>
            <span class="thread-card-likes ms-1"><%= thread.likes %></span>
            <!-- Display thread likes -->
            <i class="bx bx-comment-detail ms-3"></i>
            <span class="thread-card-likes ms-1"><%= thread.comments %></span>
            <!-- Display thread comments -->
          </div>
        </div>
        <!-- End of Card -->
      </div>
    </div>
    <% }); %>
    <!-- End of loop -->
  </div>
  <!-- search box -->
  <div
    class="row height d-flex justify-content-center align-items-center search-container"
  >
    <div class="col-md-8">
      <div class="search">
        <input
          type="text"
          id="searchInput"
          class="form-control"
          placeholder="Search Thread"
        />
        <button id="searchButton"><i class="bx bx-search"></i></button>
      </div>
    </div>
  </div>

  <div class="row thread-search-results" id="threadSearchResults"></div>
</div>
